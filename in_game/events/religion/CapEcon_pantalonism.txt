
namespace = cap_econ

cap_econ.2 = {
	type = country_event

	title = cap_econ.2.title
	desc = cap_econ.2.desc
	illustration_tags = {
		10 = interior
		10 = happy
	}

	trigger = {
		receiving_scripted_relation_of_type = relation_type:cap_econ_send_pantalone
		giving_scripted_relation_of_type = relation_type:cap_econ_extraction_rights
		NOT = { has_variable = cap_econ_pantalone_event_fired }
	}
	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = cap_econ.2.a
		custom_tooltip = {
			text = lots_of_pantalonists
		}
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_variable = cap_econ_pantalonism_enabled }
				}
				religion:pantalonism = {
					enable_religion = yes
				}
				set_global_variable = { name = cap_econ_pantalonism_enabled value = yes }
			}
			set_variable = { name = cap_econ_pantalone_event_fired value = yes }
			lots_of_pantalonist = yes
		}

	}
}

cap_econ.3 = {
	title = cap_econ.3.title
	type = country_event
	hidden = yes

	trigger = {
		has_variable = cap_econ_pantalone_event_fired
		OR = {
			NOT = { receiving_scripted_relation_of_type = relation_type:cap_econ_send_pantalone }
			NOT = { giving_scripted_relation_of_type = relation_type:cap_econ_extraction_rights }
		}
	}

	immediate = {
		remove_variable = cap_econ_pantalone_event_fired
	}
}
