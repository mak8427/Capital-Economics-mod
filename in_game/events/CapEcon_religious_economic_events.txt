# Religious-economic events tied to the spread of Pantalonism.
namespace = cap_econ

cap_econ.2 = {
    type = country_event

    title = cap_econ.2.title
    desc = cap_econ.2.desc
    illustration_tags = {
        10 = interior
        10 = happy
    }

    trigger = {
        receiving_scripted_relation_of_type = relation_type:cap_econ_send_pantalone
    }
    immediate = {
        event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
    }

    option = {
        name = cap_econ.2.a
        custom_tooltip = {
            text = lots_of_pantalonists
        }
        hidden_effect = {
            if = {
                limit = {
                    NOT = { has_global_variable = cap_econ_pantalonism_enabled }
                }
                religion:pantalonism = {
                    enable_religion = yes
                }
                set_global_variable = { name = cap_econ_pantalonism_enabled value = yes }
            }
            lots_of_pantalonist = yes
        }

    }
}

cap_econ.30 = {
    type = country_event

    title = cap_econ.30.title
    desc = cap_econ.30.desc
    illustration_tags = {
        10 = interior
        10 = happy
    }

    trigger = {
        religion = religion:pantalonism
        NOT = { has_variable = cap_econ_pacchetto_spawned }
    }

    immediate = {
        create_character = {
            last_name = surname_pacchetto
            first_name = name_pacchetto
            culture = culture:piedmontese
            religion = religion:pantalonism
            estate = estate_type:clergy_estate
            adm = { 100 100 }
            dip = { 100 100 }
            mil = { 100 100 }
            age = { 24 24 }
            create_in_limbo = yes
            save_scope_as = cap_econ_pacchetto
        }
    }

    option = {
        name = cap_econ.30.a
        scope:cap_econ_pacchetto ?= {
            set_new_ruler = scope:cap_econ_pacchetto

        }
        set_variable = cap_econ_pacchetto_spawned
    }
}

cap_econ.31 = {
    type = country_event

    title = cap_econ.31.title
    desc = cap_econ.31.desc
    illustration_tags = {
        10 = interior
        10 = happy
    }

    trigger = {
       religion = religion:pantalonism
    }

    option = {
        name = cap_econ.31.a
        custom_tooltip = cap_econ.31.a.tt
        add_gold = {
            value = root.country_tax_base
            multiply = 5
        }
    }
    option = {
        name = cap_econ.31.b
        custom_tooltip = cap_econ.31.b.tt
        add_stability = 10
        add_research_progress = cap_econ_research_progress_gift
    }
}

cap_econ.32 = {
    type = country_event

    title = cap_econ.32.title
    desc = cap_econ.32.desc
    illustration_tags = {
        10 = interior
        10 = happy
    }

    trigger = {
       religion = religion:pantalonism
    }

    option = {
        name = cap_econ.32.a
        custom_tooltip = cap_econ.32.a.tt
        add_gold_to_estate = {
            estate_type = estate_type:burghers_estate
            value = {
                value = root.country_tax_base
                multiply = 5
            }
        }
    }
    option = {
        name = cap_econ.32.b
        custom_tooltip = cap_econ.32.b.tt
        add_gold_to_estate = {
            estate_type = estate_type:burghers_estate
            value = {
                value = root.country_tax_base
                multiply = 4
            }
        }
        add_gold = root.country_tax_base
    }
    option = {
        name = cap_econ.32.c
        custom_tooltip = cap_econ.32.c.tt
        add_country_modifier = {
            modifier = cap_econ_pantalone_tax_gift
            days = 365
        }
    }
}
