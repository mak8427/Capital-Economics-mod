namespace = cap_econ



cap_econ.1 = {
	type = country_event

	title = cap_econ.1.title
	desc = cap_econ.1.desc
	illustration_tags = {
		10 = interior
		10 = happy
	}

	trigger = {
		receiving_scripted_relation_of_type = relation_type:cap_econ_send_pantalone
		giving_scripted_relation_of_type = relation_type:cap_econ_extraction_rights
		NOT = { has_variable = cap_econ_mangiatoia_event_fired }
	}
	immediate = {
		event_illustration_estate_effect = { foreground = estate_type:clergy_estate background = estate_type:clergy_estate }
	}

	option = {
		name = cap_econ.1.a
		add_gold = { value = root.estate_tax_base:burghers_estate	multiply = 10 }
		#add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_extreme_bonus	}
		add_gold_to_estate = {
			estate_type = estate_type:burghers_estate
			value = { value = root.estate_tax_base:burghers_estate multiply = 10	}
		}
		random_owned_non_rural_location = {
			change_building_level_in_location = {
				building = building_type:Mangiatoia
				value = 1
			}
		}
		hidden_effect = {
			set_variable = { name = cap_econ_mangiatoia_event_fired value = yes }
		}
	}
	option = {
		name = cap_econ.1.b
		add_gold = { value = root.estate_tax_base:burghers_estate	multiply = 20 }
		add_estate_satisfaction = { type = estate_type:burghers_estate value = estate_satisfaction_mild_bonus	}
		add_gold_to_estate = {
			estate_type = estate_type:burghers_estate
			value = { value = root.estate_tax_base:burghers_estate multiply = 5	}
		}
		random_owned_non_rural_location = {
			change_building_level_in_location = {
				building = building_type:Mangiatoia
				value = 1
			}
		}
			random_owned_location = {
			change_building_level_in_location = {
				building = building_type:Mangiatoia
				value = 1
			}
		}
			random_owned_location = {
			change_building_level_in_location = {
				building = building_type:Mangiatoia
				value = 1
			}
		}
		hidden_effect = {
			set_variable = { name = cap_econ_mangiatoia_event_fired value = yes }
		}
	}

}

cap_econ.4 = {
	type = country_event
	hidden = yes

	trigger = {
		has_variable = cap_econ_mangiatoia_event_fired
		OR = {
			NOT = { receiving_scripted_relation_of_type = relation_type:cap_econ_send_pantalone }
			NOT = { giving_scripted_relation_of_type = relation_type:cap_econ_extraction_rights }
		}
	}

	immediate = {
		remove_variable = cap_econ_mangiatoia_event_fired
	}
}
